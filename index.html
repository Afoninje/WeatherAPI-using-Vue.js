<!DOCTYPE html>
<html>
  <head>
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.13/vue.js"></script>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="main.js"></script>
  </head>

  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous"
  />

  <link rel="stylesheet" type="text/css" href="style.css" />

  <body>
    <div class="loader_bg">
      <div class="loader">
        <svg
          version="1.1"
          id="sun"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          x="0px"
          y="0px"
          width="10px"
          height="10px"
          viewBox="0 0 10 10"
          enable-background="new 0 0 10 10"
          xml:space="preserve"
          style="opacity: 1; margin-left: 0px; margin-top: 0px;"
        >
          <g>
            <path
              fill="none"
              d="M6.942,3.876c-0.4-0.692-1.146-1.123-1.946-1.123c-0.392,0-0.779,0.104-1.121,0.301c-1.072,0.619-1.44,1.994-0.821,3.067C3.454,6.815,4.2,7.245,5,7.245c0.392,0,0.779-0.104,1.121-0.301C6.64,6.644,7.013,6.159,7.167,5.581C7.321,5,7.243,4.396,6.942,3.876z M6.88,5.505C6.745,6.007,6.423,6.427,5.973,6.688C5.676,6.858,5.34,6.948,5,6.948c-0.695,0-1.343-0.373-1.69-0.975C2.774,5.043,3.093,3.849,4.024,3.312C4.32,3.14,4.656,3.05,4.996,3.05c0.695,0,1.342,0.374,1.69,0.975C6.946,4.476,7.015,5,6.88,5.505z"
            ></path>
            <path
              fill="none"
              d="M8.759,2.828C8.718,2.757,8.626,2.732,8.556,2.774L7.345,3.473c-0.07,0.041-0.094,0.132-0.053,0.202C7.319,3.723,7.368,3.75,7.419,3.75c0.025,0,0.053-0.007,0.074-0.02l1.211-0.699C8.774,2.989,8.8,2.899,8.759,2.828z"
            ></path>
            <path
              fill="none"
              d="M1.238,7.171c0.027,0.047,0.077,0.074,0.128,0.074c0.025,0,0.051-0.008,0.074-0.02l1.211-0.699c0.071-0.041,0.095-0.133,0.054-0.203S2.574,6.228,2.503,6.269l-1.21,0.699C1.221,7.009,1.197,7.101,1.238,7.171z"
            ></path>
            <path
              fill="none"
              d="M6.396,2.726c0.052,0,0.102-0.026,0.13-0.075l0.349-0.605C6.915,1.976,6.89,1.885,6.819,1.844c-0.07-0.042-0.162-0.017-0.202,0.054L6.269,2.503C6.228,2.574,6.251,2.666,6.322,2.706C6.346,2.719,6.371,2.726,6.396,2.726z"
            ></path>
            <path
              fill="none"
              d="M3.472,7.347L3.123,7.952c-0.041,0.07-0.017,0.162,0.054,0.203C3.2,8.169,3.226,8.175,3.25,8.175c0.052,0,0.102-0.027,0.129-0.074l0.349-0.605c0.041-0.07,0.017-0.16-0.054-0.203C3.603,7.251,3.513,7.276,3.472,7.347z"
            ></path>
            <path
              fill="none"
              d="M3.601,2.726c0.025,0,0.051-0.007,0.074-0.02C3.746,2.666,3.77,2.574,3.729,2.503l-0.35-0.604C3.338,1.828,3.248,1.804,3.177,1.844C3.106,1.886,3.082,1.976,3.123,2.047l0.35,0.604C3.5,2.7,3.549,2.726,3.601,2.726z"
            ></path>
            <path
              fill="none"
              d="M6.321,7.292c-0.07,0.043-0.094,0.133-0.054,0.203l0.351,0.605c0.026,0.047,0.076,0.074,0.127,0.074c0.025,0,0.051-0.006,0.074-0.02c0.072-0.041,0.096-0.133,0.055-0.203l-0.35-0.605C6.483,7.276,6.393,7.253,6.321,7.292z"
            ></path>
            <path
              fill="none"
              d="M2.202,5.146c0.082,0,0.149-0.065,0.149-0.147S2.284,4.851,2.202,4.851H1.503c-0.082,0-0.148,0.066-0.148,0.148s0.066,0.147,0.148,0.147H2.202z"
            ></path>
            <path
              fill="none"
              d="M8.493,4.851H7.794c-0.082,0-0.148,0.066-0.148,0.148s0.066,0.147,0.148,0.147l0,0h0.699c0.082,0,0.148-0.065,0.148-0.147S8.575,4.851,8.493,4.851L8.493,4.851z"
            ></path>
            <path
              fill="none"
              d="M5.146,2.203V0.805c0-0.082-0.066-0.148-0.148-0.148c-0.082,0-0.148,0.066-0.148,0.148v1.398c0,0.082,0.066,0.149,0.148,0.149C5.08,2.352,5.146,2.285,5.146,2.203z"
            ></path>
            <path
              fill="none"
              d="M4.85,7.796v1.396c0,0.082,0.066,0.15,0.148,0.15c0.082,0,0.148-0.068,0.148-0.15V7.796c0-0.082-0.066-0.148-0.148-0.148C4.917,7.647,4.85,7.714,4.85,7.796z"
            ></path>
            <path
              fill="none"
              d="M2.651,3.473L1.44,2.774C1.369,2.732,1.279,2.757,1.238,2.828C1.197,2.899,1.221,2.989,1.292,3.031l1.21,0.699c0.023,0.013,0.049,0.02,0.074,0.02c0.051,0,0.101-0.026,0.129-0.075C2.747,3.604,2.722,3.514,2.651,3.473z"
            ></path>
            <path
              fill="none"
              d="M8.704,6.968L7.493,6.269c-0.07-0.041-0.162-0.016-0.201,0.055c-0.041,0.07-0.018,0.162,0.053,0.203l1.211,0.699c0.023,0.012,0.049,0.02,0.074,0.02c0.051,0,0.102-0.027,0.129-0.074C8.8,7.101,8.776,7.009,8.704,6.968z"
            ></path>
          </g>
        </svg>

        <svg
          version="1.1"
          id="cloud"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          x="0px"
          y="0px"
          width="10px"
          height="10px"
          viewBox="0 0 10 10"
          enable-background="new 0 0 10 10"
          xml:space="preserve"
        >
          <path
            fill="none"
            d="M8.528,5.624H8.247c-0.085,0-0.156-0.068-0.156-0.154c0-0.694-0.563-1.257-1.257-1.257c-0.098,0-0.197,0.013-0.3,0.038C6.493,4.259,6.45,4.252,6.415,4.229C6.38,4.208,6.356,4.172,6.348,4.131C6.117,3.032,5.135,2.235,4.01,2.235c-1.252,0-2.297,0.979-2.379,2.23c-0.004,0.056-0.039,0.108-0.093,0.13C1.076,4.793,0.776,5.249,0.776,5.752c0,0.693,0.564,1.257,1.257,1.257h6.495c0.383,0,0.695-0.31,0.695-0.692S8.911,5.624,8.528,5.624z"
          ></path>
        </svg>

        <div class="rain">
          <span class="drop"></span>
          <span class="drop"></span>
          <span class="drop"></span>
          <span class="drop"></span>
          <span class="drop"></span>
          <span class="drop"></span>
          <span class="drop"></span>
          <span class="drop"></span>
          <span class="drop"></span>
          <span class="drop"></span>
        </div>

        <div class="text">
          LOOKING OUTSIDE FOR YOU...
        </div>
      </div>
    </div>

    <div id="app" class="background">
      <div class="container">
        <div class="container">
          <form class="mt-5">
            <div class="form-group">
              <strong style="color: black;">Search for City</strong>
              <input
                type="text"
                v-model="citycopy"
                id="citysearch"
                class="form-control form-control-lg"
              />
            </div>

            <button
              type="submit"
              @click.prevent="process"
              class="btn btn-primary"
            >
              Search
            </button>
            <button
              type="submit"
              @click.prevent="myFunction()"
              class="btn btn-primary"
            >
              Information About Your Current Location
            </button>
          </form>
          <strong style="color: aliceblue;"
            >Note: You will only be able to get information about your current
            location on mobile devices if you have locations turned on in the
            settings</strong
          >

          <div id="app" v-show="submitted" v-cloak>
            <div class="container" background>
              <div class="card mt-5">
                <h2 class="card-header">Information for: {{city}}</h2>
                <table
                  role="table"
                  class="table table-bordered table-responsive-sm"
                >
                  <thead role="rowgroup" class="thead-dark">
                    <tr role="row">
                      <th></th>
                      <th role="columnheader">Current Temperature:</th>
                      <th role="columnheader">Description:</th>
                      <th role="columnheader">Current Pressure:</th>
                      <th role="columnheader">Current Humidity:</th>
                    </tr>
                  </thead>
                  <tbody role="rowgroup">
                    <tr role="row">
                      <td class="text-center" role="cell">
                        <img :src="findmaindesc" />
                      </td>
                      <td class="text-center" role="cell">{{findtemp}}°C</td>
                      <td class="text-center" role="cell">{{finddesc}}</td>
                      <td class="text-center" role="cell">
                        {{findpressure}} Pa
                      </td>
                      <td class="text-center" role="cell">{{findhumidity}}%</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div id="app" v-cloak v-show="usersubmitted">
            <div class="container">
              <div class="card">
                <h2 class="card-header">Your Current Location</h2>
                <table class="table table-bordered table-responsive-sm">
                  <thead class="thead-dark">
                    <th></th>
                    <th th class="text-center">Current Temperature:</th>
                    <th th class="text-center">Description:</th>
                    <th th class="text-center">Current Pressure:</th>
                    <th th class="text-center">Current Humidity:</th>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="text-center"><img :src="usermaindesc" /></td>
                      <td class="text-center">{{usertemp}}°C</td>
                      <td class="text-center">{{userdesc}}</td>
                      <td class="text-center">{{userpressure}} Pa</td>
                      <td class="text-center">{{userhumidity}}%</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
      var url =
        "https://api.openweathermap.org/data/2.5/weather?q=&appid=ad59e4fb24b7f88d5eaf006cc977159e";
      var urlcopy =
        "https://api.openweathermap.org/data/2.5/weather?q=&appid=ad59e4fb24b7f88d5eaf006cc977159e";

      var vm = new Vue({
        el: "#app",
        vuetify: new Vuetify(),
        data: {
          city: "",
          citycopy: "",
          submitted: false,
          usersubmitted: false,
          observation_time: "",
          findtemp: "",
          finddesc: "",
          findhumidity: "",
          findpressure: "",
          error: "",
          lat: "",
          lon: "",
          userdesc: "",
          usertemp: "",
          userpressure: "",
          userhumidity: "",
          findIconCode: "",
          userIconCode: "",
          displayImageURL: "",
          usermaindesc: "",
          findmaindesc: "",
        },

        methods: {
          process: function () {
            this.submitted = true;
            this.usersubmitted = false;

            vm.city = vm.citycopy;

            var url =
              "https://api.openweathermap.org/data/2.5/weather?q=" +
              vm.city +
              "&appid=ad59e4fb24b7f88d5eaf006cc977159e";

            axios.get(url).then(function (res) {
              console.clear();
              console.log(res);

              vm.finddesc = res.data.weather[0].description;
              vm.findhumidity = res.data.main.humidity;
              vm.findpressure = res.data.main.pressure;
              vm.findtemp = res.data.main.temp;
              vm.findtemp = vm.findtemp - 273.15;
              vm.findtemp = vm.findtemp.toFixed(2);
              vm.findIconCode = res.data.weather[0].icon;
              vm.findmaindesc = res.data.weather[0].main;

              if (vm.findIconCode == "01d") {
                vm.findmaindesc = "WeatherPhotos/sunny.gif";
              } else if (vm.findIconCode == "01n") {
                vm.findmaindesc = "WeatherPhotos/night.gif";
              } else if (vm.findmaindesc == "Clouds") {
                vm.findmaindesc = "WeatherPhotos/partlycloud.gif";
              } else if (vm.findmaindesc == "Snow") {
                vm.findmaindesc = "WeatherPhotos/snow.gif";
              } else if (vm.findmaindesc == "Rain") {
                vm.findmaindesc = "WeatherPhotos/rain.gif";
              } else if (vm.findmaindesc == "Drizzle") {
                vm.findmaindesc = "WeatherPhotos/rain.gif";
              } else if (vm.findmaindesc == "Thunderstorm") {
                vm.findmaindesc = "WeatherPhotos/thunder.gif";
              } else if (vm.findmaindesc == "Dust") {
                vm.findmaindesc = "WeatherPhotos/Wind.gif";
              } else if (vm.findmaindesc == "Tornado") {
                vm.findmaindesc = "WeatherPhotos/Wind.gif";
              } else {
                vm.findmaindesc = "WeatherPhotos/Mist.gif";
              }

              url = urlcopy;
            });
          },

          myFunction: function () {
            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(this.showPosition);
            } else {
              this.error = "Geolocation is not supported.";
            }
          },
          showPosition: function (position) {
            this.lat = position.coords.latitude;
            this.lon = position.coords.longitude;

            axios
              .get(
                "https://api.openweathermap.org/data/2.5/weather?lat=" +
                  this.lat +
                  "&lon=" +
                  this.lon +
                  "&appid=ad59e4fb24b7f88d5eaf006cc977159e"
              )
              .then(function (res2) {
                console.clear();
                console.log(res2);

                vm.userdesc = res2.data.weather[0].description;
                vm.userhumidity = res2.data.main.humidity;
                vm.userpressure = res2.data.main.pressure;
                vm.usertemp = res2.data.main.temp;
                vm.usertemp = vm.usertemp - 273.15;
                vm.usertemp = vm.usertemp.toFixed(2);
                vm.userIconCode = res2.data.weather[0].icon;
                vm.usermaindesc = res2.data.weather[0].main;

                if (vm.userIconCode == "01d") {
                  vm.usermaindesc = "WeatherPhotos/sunny.gif";
                } else if (vm.userIconCode == "01n") {
                  vm.usermaindesc = "WeatherPhotos/night.gif";
                } else if (vm.usermaindesc == "Clouds") {
                  vm.usermaindesc = "WeatherPhotos/partlycloud.gif";
                } else if (vm.usermaindesc == "Snow") {
                  vm.usermaindesc = "WeatherPhotos/snow.gif";
                } else if (vm.usermaindesc == "Rain") {
                  vm.usermaindesc = "WeatherPhotos/rain.gif";
                } else if (vm.usermaindesc == "Drizzle") {
                  vm.usermaindesc = "WeatherPhotos/rain.gif";
                } else if (vm.usermaindesc == "Thunderstorm") {
                  vm.usermaindesc = "WeatherPhotos/thunder.gif";
                } else if (vm.usermaindesc == "Dust") {
                  vm.usermaindesc = "WeatherPhotos/Wind.gif";
                } else if (vm.usermaindesc == "Tornado") {
                  vm.usermaindesc = "WeatherPhotos/Wind.gif";
                } else {
                  vm.usermaindesc = "WeatherPhotos/Mist.gif";
                }
              });
            this.usersubmitted = true;
            this.submitted = false;
          },
        },
      });
    </script>
  </body>
</html>
